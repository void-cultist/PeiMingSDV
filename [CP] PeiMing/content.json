{
    "Format": "2.8.0",
	
	"DynamicTokens": [
		{
			"Name": "IsOddYear",
			"Value": "{{Query: {{Year}} % 2 = 1}}"
		},
//name replacer tokens
		{
			"Name": "PeiMing",
			"Value": "{{ModID}}_Peiming"
		},
		{
			"Name": "PMHouse",
			"Value": "{{ModID}}_PeiMingHouse"
		},
		{
			"Name": "PP",
			"Value": "{{ModID}}_PlatonicPartnerScheduleKey"
		},


//Tokens for map patching & map strings
		{
            "Name": "HouseLocationToken",
            "Value": "PeiMingExterior"
        },
        {
            "Name": "HouseLocationToken",
            "Value": "PeiMingExteriorSVE",
            "When": {
                "HasMod: |contains=FlashShifter.StardewValleyExpandedCP": true,
                "House Location": "SVE"
            }
        },
       {
            "Name": "HouseLocationToken",
            "Value": "PeiMingWarp",
            "When": {
                "House Location": "Alternate"
            }
        },
		{
			"Name": "OutdoorStrings",
			"Value": "PeiMingExterior",
		},
		{
			"Name": "OutdoorStrings",
			"Value": "PeiMingExteriorSVE",
			"When": {
                "HasMod: |contains=FlashShifter.StardewValleyExpandedCP": true,
                "House Location": "SVE"
            }
		},
		{
			"Name": "OutdoorStrings",
			"Value": "PeiMingNewOutdoors",
			"When": {
                "House Location": "Alternate"
            }
		},
		{
			"Name": "LockedHouseLocationToken",
			"Value": "PeiMingExteriorLocked",
		},
		{
			"Name": "LockedHouseLocationToken",
			"Value": "PeiMingExteriorSVELocked",
			"When": {
                "HasMod: |contains=FlashShifter.StardewValleyExpandedCP": true,
                "House Location": "SVE"
            }
		},
		{
			"Name": "LockedHouseLocationToken",
			"Value": "PeiMingNewOutdoorsLocked",
			"When": {
                "House Location": "Alternate"
            }
		},
		
		
		//vanilla patch, fallback
		{ "Name": "HousePatchXCoord",
		"Value": 40
		
		},
		{ "Name": "HousePatchYCoord",
		"Value": 65

		},
		{ "Name": "HousePatchWidth",
		"Value": 21

		},
		{ "Name": "HousePatchHeight",
		"Value": 16

		},

		//sve patch
		{ "Name": "HousePatchXCoord",
		"Value": 6,
		"When":
			{
                "HasMod: |contains=FlashShifter.StardewValleyExpandedCP": true,
                "House Location": "SVE"
            }
		
		},

		{ "Name": "HousePatchYCoord",
		"Value": 56,
		"When": 
			{
                "HasMod: |contains=FlashShifter.StardewValleyExpandedCP": true,
                "House Location": "SVE"
            }
		},

		{ "Name": "HousePatchWidth",
		"Value": 30,
		"When": 
			{
                "HasMod: |contains=FlashShifter.StardewValleyExpandedCP": true,
                "House Location": "SVE"
            }
		},

		{ "Name": "HousePatchHeight",
		"Value": 31,
		"When": 
			{
                "HasMod: |contains=FlashShifter.StardewValleyExpandedCP": true,
                "House Location": "SVE"
            }
		},


	

		//alternate warp
		{ "Name": "HousePatchXCoord",
		"Value": 0,
		"When": 
			{
                "House Location": "Alternate"
            }
		
		},

		{ "Name": "HousePatchYCoord",
		"Value": 30,
		"When":
			 {
                "House Location": "Alternate"
            }
		},

		{ "Name": "HousePatchWidth",
		"Value": 5,
		"When": 
			{
                "House Location": "Alternate"
            }
		},
		
		{ "Name": "HousePatchHeight",
		"Value": 10,
		"When": 
			{
                "House Location": "Alternate"
            }
		},


//woods or beach visit during birthday
		{ "Name": "WoodsOrBeach",
		   "Value": "Beach",
		   "When": { "IsOddYear": true 
				
			},
		},
		{ "Name": "WoodsOrBeach",
			"Value": "Woods",
			"When": {
				"IsOddYear": false
				
			},
		},
	

	//event stuff, don't ask. don't. please.
	{
		"Name": "ReadingAnimation",
		"Value": "animate {{PeiMing}} false false 600 32 33 33 33 33 34 34 34 34 32 32 33 33 34 34 32"
	},
	{
		"Name": "DrinkingAnimation",
		"Value": "animate {{PeiMing}} false false 600 16 16 16 16 16 16 16 17 17 18 18 19 19 19 19 19 18 18 17 17 16 16 16 16 16 16"
	},
	{
		"Name": "BeerAnimation",
		"Value": "animate {{PeiMing}} false true 600 16 16 16 16 16 16 16 17 17 18 18 19 19 19 19 19 18 18 17 17 16 16 16 20 20 21 21 22 22 20 22 20 22 20 22 16"
	},
//Saloon or Mountains?

	{	
	"Name": "PM4HLocation",
	"Value": "Mountain",
	"When": { "HasSeenEvent |contains={{ModID}}_PM3HMountains": true }
	},
	{
	"Name": "PM4HLocation",
	"Value": "Saloon",
	},
	{
		"Name": "5HTriggerCondition",
		"Value": "PM4HSaloon",
		"When": {
			"HasSeenEvent: |contains={{ModID}}_PM4HSaloon": true
		}
	},
	{
		"Name": "5HTriggerCondition",
		"Value": "PM4HMountain",
		"When": {
			"HasSeenEvent: |contains={{ModID}}_PM4HMountain": true
		}	
	}
		
	],
	
   "ConfigSchema": 
   {
	   "House Location": 
		{	"AllowValues": "Vanilla, SVE, Alternate",
			"Default": "Vanilla",
			"AllowBlank": false,
			"Description": "Changes the location of Pei Ming's house when using SVE, will otherwise cause clipping issues with Andy's farm. 'Alternate' adds a warp point next to the Wizard Tower and should be selected in case there's conflicts with other mods."
		},
			
		"Portrait Style": 
		{	"AllowValues": "Default, Alternative",
			"Default": "Default",
			"AllowBlank": true,
			"Description": "Default = by Pastelshrooms whose sprites inspired this mod; Alternative = by voidcultist, inspired by Nyapu"
		},

		"Festival Participation":
		{ 	"AllowValues": "true, false",
			"Default": "true",
			"AllowBlank": false,
			"Description": "Let Pei Ming attend festivals. Disable if there is conflict with other mods. Default true."
		},

		"Partnership":
		{	"AllowValues": "Platonic Partnership, Roommates",
			"Default": "Roommates",
			"AllowBlank": false,
			"Description": "Whether Pei Ming behaves like a vanilla roommate or a platonic partner after moving in. Suggestion: use Platonic Partnership with the Mod 'Hugs and Kisses' with 'RoommateKisses' enabled!",
			"Section": "Relationship"
		},
	/* 	"Ceremony":
		{	"AllowValues": "true, false",
			"Default": false,
			"AllowBlank": false,
			"Description": "Whether or not you want to celebrate your companionship with a platonic ceremony (like a Wedding event).",
			"Section": "Platonic Partnership exclusive",

		}, */
		/* "Farm Upgrades":
		{
			"AllowValues": "Farmhouse Renovation, Farm Building",
			"Default": "Farmhouse Renovation",
			"AllowBlank": true,
			"Description": "Farmhouse Renovation: Pei Ming gets his own little room in your farmhouse (this is NOT the vanilla spouse room); Farm Building: Pei Ming gets his own little cabin you can place on your farm",
			"Section": "Platonic Partnership exclusive",
		} */
	
			
	}, 
    "Changes":
	  [{
   		 "LogName": "Blank JSON load", //The logline is not required, but it's useful down the road for labeling your patches so you can tell your problem is, say "NPC Dialogue Patch" and not "NPC Patch #14"
        	"Action": "Load",
        	"Target": "Characters/Dialogue/{{PeiMing}}, Characters/schedules/{{PeiMing}}, Strings/schedules/{{PeiMing}}, Strings/StringsFromMaps/{{PMHouse}}, Strings/StringsFromMaps/{{ModID}}_PeiMingExterior, Strings/StringsFromCSFiles/{{PeiMing}}_EngagedRoommate, Strings/1_6_Strings/{{ModID}}_Renovation_AddCustomRoom, Data/EngagementDialogue/{{PeiMing}}, Characters/Dialogue/MarriageDialogue{{PeiMing}}Roommate, Characters/schedules/{{PeiMing}}Roommate, Data/Events/{{PMHouse}}, Data/Locations/{{ModID}}_PeiMingNewOutdoors", 
        	"FromFile": "assets/data/blank.json" //this should be wherever you put it in your assets folder - put it in a subfolder if you want
   	 },

//includes
{
    "LogName": "Include Pei Ming dispos",
   	"Action": "Include",
   	"FromFile": "assets/data/dispos.json"
},
{ 
	"LogName": "Gift Tastes Include",
   	"Action": "Include",
   	"FromFile": "assets/data/gifttastes.json"
},
{
	"LogName": "Include Custom Schedule keys",
	"Action": "Include",
	"When": { "Partnership": "Platonic Partnership"},
	"FromFile": "assets/data/PlatonicPartnership/CustomScheduleKeys.json"
},
{
    "LogName": "Include NPC Dialogue",
   	"Action": "Include",
	"FromFile": "assets/data/dialogue.json"
},
{
	"LogName": "Include map data",
	"Action": "Include",
	"FromFile": "assets/data/mapdata.json"
},
{
	"LogName": "Include CT",
	"Action": "Include",
	"FromFile": "assets/data/ConversationTopics.json",
},

{
	"LogName": "1.6.Strings include",
	"Action": "Include",
	"FromFile": "assets/data/Strings/1_6_Strings.json",
},
{
	"LogName": "add map messages to Pei Ming's house and patio",
	"Action": "Include",
	"FromFile":  "assets/data/Strings/StringsFromMaps.json" 
},
{
	"LogName": "Include updated schedule when Pei Ming is roommate with config Platonic Partnership - Vanilla",
	"Action": "Include",
	"When": { 
		"HasMod: |contains=FlashShifter.StardewValleyExpandedCP": false,
		"House Location": "Vanilla, Alternate",
		"Partnership": "Platonic Partnership",
		"HasSeenEvent |contains={{ModID}}_BecomeRoommates": true },
	"FromFile": "assets/data/PlatonicPartnership/IgnoreMarriageScheduleVanilla.json"
},
{
	"LogName": "Include updated schedule when Pei Ming is roommate with config Platonic Partnership - SVE",
	"Action": "Include",
	"When": { 
		"HasMod: |contains=FlashShifter.StardewValleyExpandedCP": true,
		"House Location": "SVE, Alternate",
		"Partnership": "Platonic Partnership",
		"HasSeenEvent |contains={{ModID}}_BecomeRoommates": true },
	"FromFile": "assets/data/PlatonicPartnership/IgnoreMarriageScheduleSVE.json"
},
{
    "LogName": "PeiMing Vanilla Schedule include",
   	"Action": "Include",
	"When": { 
		"HasMod: |contains=FlashShifter.StardewValleyExpandedCP": false,
		"House Location": "Vanilla, Alternate" },
   	"FromFile": "assets/data/schedule.json"
},
		
{
    "LogName": "PeiMing SVE Schedule include",
   	"Action": "Include",
	"When": { 
		"HasMod: |contains=FlashShifter.StardewValleyExpandedCP": true,
		"House Location": "SVE, Alternate" },
   	"FromFile": "assets/data/SVE/schedule.json"
},
{
	"LogName": "Include Special Orders",
	"Action": "Include",
	"FromFile": "assets/data/specialorders.json"
},


{
    "LogName": "Include PeiMing Schedule Strings",
   	"Action": "Include",
   	"FromFile": "assets/data/Strings/schedules.json"
},

{ 	"LogName": "custom item include",
	"Action": "Include",
	"FromFile": "assets/items/items.json" 
}, 

{ 
	"LogName": "Include Pei Ming's events",
	"Action": "Include",
	"FromFile": "assets/data/Events.json" 
}, 

{
	"LogName": "Include Trigger Actions for PM",
	"Action": "Include",
	"FromFile": "assets/data/triggeractions.json",
},
{
	"LogName": "Include space core spawnables",
	"Action": "Include",
	"FromFile": "assets/data/spawnables.json"
},
/* { 
	"LogName": "Include Companionship ceremony (Event)",
	"Action": "Include",
	"When":  {
	"Partnership":"Platonic Partnership"
			},
	"FromFile": "assets/data/PlatonicPartnership/ceremony.json"
}, */
{
   	"LogName": "Festival Include SVE",
   	"Action": "Include",
	"When": {  "HasMod: |contains=FlashShifter.StardewValleyExpandedCP": true,
					"Festival Participation": true,
				 },
   	"FromFile": "assets/data/SVE/Festivals.json"
},
{
   	"LogName": "Festival Include Vanilla",
   	"Action": "Include",
	"When": {  "HasMod: |contains=FlashShifter.StardewValleyExpandedCP": false,
					"Festival Participation": true,
				 },
   	"FromFile": "assets/data/Festivals.json"
},
{
	"LogName": "Include Movie data",
	"Action": "Include",
	"FromFile": "assets/data/movies.json"
},

	
	 
/////schedule

//ignore marriage schedule, requires space core and targets the asset provided by it directly with an edit data patch!

{ "LogName": "Space Core: Ignoer marriage schedule when Partnership is Platonic Partnership",
  "Action": "EditData",
  "Target": "spacechase0.SpaceCore/NpcExtensionData",
  "When": { "Partnership": "Platonic Partnership"},
  "Entries": {
    "{{PeiMing}}": {
      "IgnoreMarriageSchedule": true,
    }
  }
},
{ "LogName": "Space Core: Separate Datability",
  "Action": "EditData",
  "Target": "spacechase0.SpaceCore/NpcExtensionData",
  "Entries": {
  "{{PeiMing}}": { "SeparateDatability": true,
  }
},
},

{ "LogName": "Space Core: Gift Event Trigger - Roommate Proposal",
  "Action": "EditData",
  "Target": "spacechase0.SpaceCore/NpcExtensionData",
  "When": { "LocationName": "{{PMHouse}}",
			"HasSeenEvent |contains={{ModID}}_BecomeRoommates": false }, 
  "Update": "OnLocationChange",
  "Entries": {
	"{{PeiMing}}": { 
	"GiftEventTriggers": {
		"(O)void.NorthernHeartMelon_GiftableTassel": "{{ModID}}_RoommateProposal"
	}
}

  }
},


//animations
{
            "LogName": "PeiMing Animations",
            "Action": "EditData",
            "Target": "Data/animationdescriptions",
            "Entries":
            {
                "{{PeiMing}}_drinkTea": "16/16 16 16 16 16 16 17 17 18 18 19 19 19 19 19 18 18 17 17 16 16 16 16 16/16",
				"{{PeiMing}}_drinkBooze": "16/16 16 16 16 16 16 17 17 18 18 19 19 19 19 19 18 18 17 17 16 16 16 20 20 21 21 22 22 20 22 20 22 20 22/16",
				"{{PeiMing}}_readBook": "32/33 33 33 33 34 34 34 34 32 32 33 33 34 34/32",
				"{{PeiMing}}_readPaper": "38/38 38 38 38 38 39 39 39 39/39",
			}
		},
	

//quests
//quest format: <"quest type/quest title/quest description in quest log/opt: additional quest instructions/opt: completion requirements/next quests for quest chain, add 0 for none/reward money in numbers/-1/can be cancelled (default false)/opt. Reaction dialogue for item delivery quests">
{
	"LogName": "Edit Quests for PM",
	"Action": "EditData",
	"Target": "Data/Quests",
	"Entries": 
		{
			"{{ModID}}_TalkWizard": "Location/{{i18n:TalkWizard.title}}/{{i18n:TalkWizard.text}}/{{i18n:TalkWizard.objective}}/WizardHouse/0/100/-1/false",
			"{{ModID}}_PMSaloon": "Location/{{i18n:PMSaloon.title}}/{{i18n:PMSaloon.text}}/{{i18n:PMSaloon.objective}}/Saloon/0/0/-1/false",
			"{{ModID}}_PMMountains": "Location/{{i18n:PMMountains.title}}/{{i18n:PMMountains.text}}/{{i18n:PMMountains.objective}}/Mountain/0/0/-1/false",
			"{{ModID}}_NHMForPM": "ItemDelivery/{{i18n:NHMForPM.title}}/{{i18n:NHMForPM.text}}/{{i18n:NHMForPM.objective}}/{{PeiMing}} void.NorthernHeartMelon_NHMelon 1/0/10000/-1/false/{{i18n:NHMForPM.reaction}}",
		}
},
//mail
//mail syntax: <"text"><"commands"><%item quest [quest ID] true%% for quests in letter>[#]<letter title>
{"LogName": "edit mail related to Pei Ming",
"Action": "EditData",
"Target": "data/mail",
"Entries": {
	"{{ModID}}_WizardLetter": "{{i18n:WizardLetter.text}}%item quest {{ModID}}_TalkWizard true%%[2][#]{{i18n:WizardLetter.title}}",
	"{{ModID}}_PMLibraryThanks": "{{i18n:PMLibraryThanks.text}}%item id (O)524 1%%[#]{{i18n:PMLibraryThanks.title}}",
	"{{ModID}}_PM4HSaloonLetter": "{{i18n:PM4HSaloonLetter.text}}%item quest {{ModID}}_PMSaloon true%%[#]{{i18n:PM4HSaloonLetter.title}}",
	"{{ModID}}_PM4HMountainsLetter": "{{i18n:PM4HMountainsLetter.text}}%item quest {{ModID}}_PMMountains true%%[#]{{i18n:PM4HMountainsLetter.title}}",
	"{{ModID}}_PMTanghuluLetter": "{{i18n:PMTanghuluLetter.text}}%item cookingRecipe {{ModID}}_Tanghulu%%[#]{{i18n:PMTanghuluLetter.title}}",
	"{{ModID}}_PMApologyLetter": "{{i18n:PMApologyLetter.text}}[#]{{i18n:PMApologyLetter.title}}",
	"{{ModID}}_SleepoverLetter": "{{i18n:SleepoverLetter.text}}[#]{{i18n:SleepoverLetter.title}}",
	"{{ModID}}_NHMSeedsLetter": "{{i18n:NHMSeedsLetter.text}}%item id (O)void.NorthernHeartMelon_NHMSeeds 1%%%item quest {{ModID}}_NHMForPM true%%[#]{{i18n:NHMSeedsLetter.title}}",
	"{{ModID}}_GlazedHeartMelonLetter": "{{i18n:GlazedHeartMelonLetter.text}}%item cookingRecipe void.NorthernHeartMelon_GlazedHeartMelon%%[#]{{i18n:GlazedHeartMelonLetter.title}}",
	"{{ModID}}_MovingInLetter": "{{i18n:MovingInLetter.text}} [#]{{i18n:MovingInLetter.title}}",
	"{{ModID}}_HuangjiuLetter": "{{i18n:HuangjiuLetter.text}}[#]{{i18n:HuangjiuLetter.title}}",
	"{{ModID}}_PM7HSaloonLetter": "{{i18n:PM7HSaloonLetter.text}}%item quest {{ModID}}_PM7HQuest true%%[#]{{i18n:PM7HSaloonLetter.title}}",
	"{{ModID}}_TanghuluInvite": "Hello, @! ^^ I would like to invite you to making tanghulu with me at my house, since you have been kind enough to procure all the ingredients. Feel free to come over around 10 in the morning! ^^ General Ming Guang, Martial God of the North[#]Making Tanghulu"

}},


//music edits and add-ins

  {			
	"LogName": "Add custom tracks",
    "Action": "EditData",
    "Target": "Data/AudioChanges",
    "Entries": {
                "{{ModId}}_Music": 
				{
                    "ID": "{{ModId}}_Music",
                    "Category": "Music",
                    "FilePaths": [ "{{AbsoluteFilePath: assets/music/asian_duet.ogg}}" ],
                    "StreamedVorbis": true,
                    "Looped": true
                },
				"{{ModID}}_PMHouseMusic":
				{   "ID": "{{ModId}}_PMHouseMusic",
                    "Category": "Music",
                    "FilePaths": [ "{{AbsoluteFilePath: assets/music/Sunrise_in_the_Dynasty.ogg}}" ],
                    "StreamedVorbis": true,
                    "Looped": true

				},
				"{{ModID}}_PMOutdoorMusic":
				{   "ID": "{{ModId}}_PMOutdoorMusic",
                    "Category": "Music",
                    "FilePaths": [ "{{AbsoluteFilePath: assets/music/asian_strings.ogg}}" ],
                    "StreamedVorbis": true,
                    "Looped": true

				},
				"{{ModID}}_HappyBGM":
				{   "ID": "{{ModId}}_HappyBGM",
                    "Category": "Music",
                    "FilePaths": [ "{{AbsoluteFilePath: assets/music/100116happybgm.ogg}}" ],
                    "StreamedVorbis": true,
                    "Looped": true

				},
				"{{ModID}}_MelancholyBGM":
				{   "ID": "{{ModId}}_MelancholyBGM",
                    "Category": "Music",
                    "FilePaths": [ "{{AbsoluteFilePath: assets/music/112416melancholypianobgm.ogg}}" ],
                    "StreamedVorbis": true,
                    "Looped": true

				},
				"{{ModID}}_ArukasBloom":
				{   "ID": "{{ModId}}_ArukasBloom",
                    "Category": "Music",
                    "FilePaths": [ "{{AbsoluteFilePath: assets/music/arukas_bloom.ogg}}" ],
                    "StreamedVorbis": true,
                    "Looped": true

				},
           	 }
},
],


}
	

